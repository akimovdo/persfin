<%
// Диагностика данных
try {
  console.log("=== ДИАГНОСТИКА ДАННЫХ ===");
  
  // Проверяем коллекции
  var collections = [
    "dashboard_summary",
    "accruals_today", 
    "accruals_overdue_summary",
    "accruals_overdue",
    "accruals_by_week_current_month"
  ];
  
  for (var i = 0; i < collections.length; i++) {
    var collectionName = collections[i];
    try {
      var records = $app.findRecordsByFilter(collectionName, "");
      console.log(collectionName + ": " + (records ? records.length : 0) + " записей");
      if (records && records.length > 0) {
        console.log("  Первая запись:", JSON.stringify(records[0].publicExport()));
      }
    } catch (e) {
      console.log(collectionName + ": ОШИБКА - " + e.message);
    }
  }
  
} catch (e) {
  console.log("Общая ошибка:", e.message);
}
%>

<h1>Диагностика данных</h1>
<p>Проверяем консоль PocketBase для вывода информации о данных</p>
<p>Время: <%= new Date().toLocaleString('ru-RU') %></p>